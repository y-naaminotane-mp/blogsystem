<?php
/************************************************
 * 関数定義
 * queryarray(クエリー)
 * 返り値
 *　→$（カラム名）＝配列（値）
 *	配列の順番は取得しているものの順番にになるので、
 *　順番を並び替えをする際はクエリーを並び替えるようにする。
 *
 ************************************************/
function queryarray($a){
	//グローバル変数pdoを呼び出してクエリーを実行して結果を取得する
	$stmt = $GLOBALS["dbh"]->query("$a");
	//アクセスに失敗した場合
		if(!$stmt){
			die("データの取得に失敗しました。");
		}
	$row = $stmt -> fetchAll(PDO::FETCH_ASSOC);
	//実行したクエリーをカラム名を変数名にして結果を配列として格納
	foreach($row as $rows){
		foreach($rows as $key2=>$val2){
	//グローバル変数をここで宣言する
			global ${$key2};
			${$key2}[] = $val2;
		}
	}
	//リターンをして処理の終了
	return ${$key2} ;
}
/***********************************************
 ***********************************************/
?>